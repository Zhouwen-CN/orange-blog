import{_ as l}from"./plugin-vue_export-helper-DlAUqK2U.js";import{r as c,o as i,c as u,e as r,a as n,b as k,w as a,f as s,d as p}from"./app-DdiGLGsK.js";const d={},v=n("h1",{id:"docker-å¿«é€Ÿå¯åŠ¨-hadoop",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#docker-å¿«é€Ÿå¯åŠ¨-hadoop"},[n("span",null,"Docker å¿«é€Ÿå¯åŠ¨ Hadoop")])],-1),m=n("p",null,[s("ğŸ‰ æ–‡ç« çš„ä¸»è¦ç›®çš„å°±æ˜¯ä¸ºäº†å¿«é€Ÿå¯åŠ¨ä¸€ä¸ª "),n("code",null,"hadoop"),s(" ç¯å¢ƒï¼Œç”¨äºå­¦ä¹ æˆ–è€…æµ‹è¯•")],-1),b=p(`<p>å½“ç„¶é¦–å…ˆéœ€è¦ docker ç¯å¢ƒï¼Œæ–‡ç« åé¢ä»‹ç»äº†å¦‚ä½•å®‰è£… docker</p><div class="hint-container tip"><p class="hint-container-title">ç®€å•ä»‹ç»ä¸€ä¸‹é•œåƒçš„åŸºæœ¬ä¿¡æ¯</p><p>é•œåƒå¤§å° 2Gï¼ŒæœåŠ¡åŒ…å« hadoop å’Œ hiveï¼Œhive é…ç½®äº† spark å¼•æ“</p><p>æ²¡æœ‰é… mysqlï¼Œä½¿ç”¨ hive è‡ªå¸¦çš„ derbyï¼Œæœ‰æ—¶é—´åœ¨æ</p><p>å¯ä»¥ç›´æ¥ä½¿ç”¨æ‰“å¥½çš„é•œåƒï¼Œæˆ–è€…å°è¯•æ„å»ºè‡ªå·±çš„é•œåƒ</p><p>å¯åŠ¨ <code>hiveserver2 10000</code> ç«¯å£éœ€è¦ä¸€äº›æ—¶é—´ï¼Œè€å¿ƒç­‰å¾…ä¸€ä¼š</p></div><h3 id="ç‰ˆæœ¬ä¿¡æ¯" tabindex="-1"><a class="header-anchor" href="#ç‰ˆæœ¬ä¿¡æ¯"><span>ç‰ˆæœ¬ä¿¡æ¯</span></a></h3><table><thead><tr><th>æœåŠ¡</th><th>ç‰ˆæœ¬</th><th>å¤‡æ³¨</th></tr></thead><tbody><tr><td>hadoop</td><td>3.1.3</td><td></td></tr><tr><td>hive</td><td>3.1.3</td><td>ç»è¿‡é‡æ–°ç¼–è¯‘ï¼Œç”¨ä½œ hive on spark</td></tr><tr><td>spark</td><td>3.3.0</td><td></td></tr></tbody></table><h3 id="é»˜è®¤ç«¯å£" tabindex="-1"><a class="header-anchor" href="#é»˜è®¤ç«¯å£"><span>é»˜è®¤ç«¯å£</span></a></h3><p>å¯ä»¥ä¿®æ”¹ï¼Œä¼ é€’çš„ç¯å¢ƒå˜é‡ä¼šè¦†ç›–é»˜è®¤å€¼</p><table><thead><tr><th>æœåŠ¡</th><th>ç«¯å£</th></tr></thead><tbody><tr><td>hdfs web</td><td>9870</td></tr><tr><td>hdfs rpc</td><td>8020</td></tr><tr><td>yarn web</td><td>8088</td></tr><tr><td>history server</td><td>19888</td></tr><tr><td>hive metastore</td><td>9083</td></tr><tr><td>hiveserver2</td><td>10000</td></tr></tbody></table><h2 id="ç›´æ¥ä½¿ç”¨æ‰“åŒ…å¥½çš„é•œåƒ" tabindex="-1"><a class="header-anchor" href="#ç›´æ¥ä½¿ç”¨æ‰“åŒ…å¥½çš„é•œåƒ"><span>ç›´æ¥ä½¿ç”¨æ‰“åŒ…å¥½çš„é•œåƒ</span></a></h2><h3 id="docker-run" tabindex="-1"><a class="header-anchor" href="#docker-run"><span>docker run</span></a></h3><p>è¿™é‡Œä½¿ç”¨ host ç½‘ç»œï¼Œæ˜¯ä¸ºäº†æ›´å¥½çš„ä½¿ç”¨ web ui çš„åŠŸèƒ½</p><p>ä¿®æ”¹ Windows çš„ hosts æ–‡ä»¶ï¼ˆæˆ‘è¿™é‡Œæ˜¯ Windowsï¼Œè™šæ‹Ÿæœºç”¨çš„ VMwareï¼‰ï¼Œå°±å¯ä»¥æ„‰å¿«çš„ç©è€äº†</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token function">docker</span> run <span class="token parameter variable">-itd</span> <span class="token punctuation">\\</span>
<span class="token parameter variable">--name</span> hadoop100 <span class="token punctuation">\\</span>
<span class="token parameter variable">--net</span><span class="token operator">=</span>host <span class="token punctuation">\\</span>
<span class="token parameter variable">-p</span> <span class="token number">9870</span>:9870 <span class="token punctuation">\\</span>
<span class="token parameter variable">-p</span> <span class="token number">8020</span>:8020 <span class="token punctuation">\\</span>
<span class="token parameter variable">-p</span> <span class="token number">8088</span>:8088 <span class="token punctuation">\\</span>
<span class="token parameter variable">-p</span> <span class="token number">19888</span>:19888 <span class="token punctuation">\\</span>
<span class="token parameter variable">-p</span> <span class="token number">9083</span>:9083 <span class="token punctuation">\\</span>
<span class="token parameter variable">-p</span> <span class="token number">10000</span>:10000 <span class="token punctuation">\\</span>
registry.cn-hangzhou.aliyuncs.com/zhouwen/apache-hadoop:3.1.3
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="docker-compose" tabindex="-1"><a class="header-anchor" href="#docker-compose"><span>docker compose</span></a></h3><div class="hint-container tip"><p class="hint-container-title">æ‰§è¡Œæ­¥éª¤</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token comment">#é¦–å…ˆéœ€è¦åˆ›å»ºä¸€ä¸ªæ–‡ä»¶å¤¹</span>
<span class="token function">mkdir</span> hadoop-compose <span class="token operator">&amp;&amp;</span> <span class="token builtin class-name">cd</span> hadoop-compose
<span class="token comment">#åˆ›å»ºhadoop.envæ–‡ä»¶</span>
<span class="token function">vi</span> hadoop.env
<span class="token comment">#åˆ›å»ºcompose ymlæ–‡ä»¶</span>
<span class="token function">vi</span> docker-compose.yml
<span class="token comment">#å¯åŠ¨</span>
<span class="token function">docker</span> compose up <span class="token parameter variable">-d</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><p>åªæœ‰åœ¨ compose æ‰éœ€è¦ï¼Œdocker run æœ‰é»˜è®¤å€¼</p><details class="hint-container details"><summary>hadoop.env</summary><div class="language-bash line-numbers-mode" data-ext="sh" data-title="hadoop-compose/hadoop.env"><pre class="language-bash"><code><span class="token assign-left variable">HADOOP_HDFS_NN_ADDRESS</span><span class="token operator">=</span>namenode
<span class="token assign-left variable">HADOOP_YARN_RM_ADDRESS</span><span class="token operator">=</span>resourcemanager
<span class="token assign-left variable">HADOOP_MR_HISTORYSERVER_ADDRESS</span><span class="token operator">=</span>historyserver
<span class="token assign-left variable">HADOOP_HIVE_ADDRESS</span><span class="token operator">=</span>hive
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></details><p>è¿™é‡Œ replicated 3 è¡¨ç¤ºè¿™ä¸ªæœåŠ¡ä¼šèµ· 3 ä¸ªå‰¯æœ¬ï¼Œå½“ç„¶ä»–è¿˜æ˜¯å•æœº</p><details class="hint-container details"><summary>docker-compose.yml</summary><div class="language-yaml line-numbers-mode" data-ext="yml" data-title="hadoop-compose/docker-compose.yml"><pre class="language-yaml"><code><span class="token key atrule">version</span><span class="token punctuation">:</span> <span class="token string">&#39;3.9&#39;</span>
<span class="token key atrule">services</span><span class="token punctuation">:</span>
  <span class="token key atrule">namenode</span><span class="token punctuation">:</span>
    <span class="token key atrule">image</span><span class="token punctuation">:</span> registry.cn<span class="token punctuation">-</span>hangzhou.aliyuncs.com/zhouwen/apache<span class="token punctuation">-</span>hadoop<span class="token punctuation">:</span>3.1.3
    <span class="token key atrule">ports</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> 9870<span class="token punctuation">:</span><span class="token number">9870</span>
      <span class="token punctuation">-</span> 8020<span class="token punctuation">:</span><span class="token number">8020</span>
    <span class="token key atrule">env_file</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> hadoop.env
    <span class="token key atrule">healthcheck</span><span class="token punctuation">:</span>
      <span class="token key atrule">test</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>&#39;CMD<span class="token punctuation">-</span>SHELL&#39;ï¼Œ&#39;curl <span class="token punctuation">-</span>s namenode<span class="token punctuation">:</span>9870 <span class="token punctuation">|</span><span class="token punctuation">|</span> exit 1&#39;<span class="token punctuation">]</span>
      <span class="token key atrule">interval</span><span class="token punctuation">:</span> 30s
      <span class="token key atrule">timeout</span><span class="token punctuation">:</span> 2s
      <span class="token key atrule">retries</span><span class="token punctuation">:</span> <span class="token number">5</span>
    <span class="token key atrule">command</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&#39;namenode&#39;</span><span class="token punctuation">]</span>

  <span class="token key atrule">datanode</span><span class="token punctuation">:</span>
    <span class="token key atrule">image</span><span class="token punctuation">:</span> registry.cn<span class="token punctuation">-</span>hangzhou.aliyuncs.com/zhouwen/apache<span class="token punctuation">-</span>hadoop<span class="token punctuation">:</span>3.1.3
    <span class="token key atrule">depends_on</span><span class="token punctuation">:</span>
      <span class="token key atrule">namenode</span><span class="token punctuation">:</span>
        <span class="token key atrule">condition</span><span class="token punctuation">:</span> service_healthy
        <span class="token key atrule">restart</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
    <span class="token key atrule">env_file</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> hadoop.env
    <span class="token key atrule">command</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&#39;datanode&#39;</span><span class="token punctuation">]</span>
    <span class="token comment"># deploy:</span>
    <span class="token comment">#  mode: replicated</span>
    <span class="token comment">#  replicas: 3</span>

  <span class="token key atrule">resourcemanager</span><span class="token punctuation">:</span>
    <span class="token key atrule">image</span><span class="token punctuation">:</span> registry.cn<span class="token punctuation">-</span>hangzhou.aliyuncs.com/zhouwen/apache<span class="token punctuation">-</span>hadoop<span class="token punctuation">:</span>3.1.3
    <span class="token key atrule">ports</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> 8088<span class="token punctuation">:</span><span class="token number">8088</span>
    <span class="token key atrule">env_file</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> hadoop.env
    <span class="token key atrule">healthcheck</span><span class="token punctuation">:</span>
      <span class="token key atrule">test</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>&#39;CMD<span class="token punctuation">-</span>SHELL&#39;ï¼Œ&#39;curl <span class="token punctuation">-</span>s resourcemanager<span class="token punctuation">:</span>8088 <span class="token punctuation">|</span><span class="token punctuation">|</span> exit 1&#39;<span class="token punctuation">]</span>
      <span class="token key atrule">interval</span><span class="token punctuation">:</span> 30s
      <span class="token key atrule">timeout</span><span class="token punctuation">:</span> 2s
      <span class="token key atrule">retries</span><span class="token punctuation">:</span> <span class="token number">5</span>
    <span class="token key atrule">command</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&#39;resourcemanager&#39;</span><span class="token punctuation">]</span>

  <span class="token key atrule">nodemanager</span><span class="token punctuation">:</span>
    <span class="token key atrule">image</span><span class="token punctuation">:</span> registry.cn<span class="token punctuation">-</span>hangzhou.aliyuncs.com/zhouwen/apache<span class="token punctuation">-</span>hadoop<span class="token punctuation">:</span>3.1.3
    <span class="token key atrule">depends_on</span><span class="token punctuation">:</span>
      <span class="token key atrule">resourcemanager</span><span class="token punctuation">:</span>
        <span class="token key atrule">condition</span><span class="token punctuation">:</span> service_healthy
        <span class="token key atrule">restart</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
    <span class="token key atrule">env_file</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> hadoop.env
    <span class="token key atrule">command</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&#39;nodemanager&#39;</span><span class="token punctuation">]</span>
    <span class="token comment"># deploy:</span>
    <span class="token comment">#  mode: replicated</span>
    <span class="token comment">#  replicas: 3</span>

  <span class="token key atrule">historyserver</span><span class="token punctuation">:</span>
    <span class="token key atrule">image</span><span class="token punctuation">:</span> registry.cn<span class="token punctuation">-</span>hangzhou.aliyuncs.com/zhouwen/apache<span class="token punctuation">-</span>hadoop<span class="token punctuation">:</span>3.1.3
    <span class="token key atrule">ports</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> 19888<span class="token punctuation">:</span><span class="token number">19888</span>
    <span class="token key atrule">depends_on</span><span class="token punctuation">:</span>
      <span class="token key atrule">resourcemanager</span><span class="token punctuation">:</span>
        <span class="token key atrule">condition</span><span class="token punctuation">:</span> service_healthy
        <span class="token key atrule">restart</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
    <span class="token key atrule">env_file</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> hadoop.env
    <span class="token key atrule">healthcheck</span><span class="token punctuation">:</span>
      <span class="token key atrule">test</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>&#39;CMD<span class="token punctuation">-</span>SHELL&#39;ï¼Œ&#39;curl <span class="token punctuation">-</span>s historyserver<span class="token punctuation">:</span>19888 <span class="token punctuation">|</span><span class="token punctuation">|</span> exit 1&#39;<span class="token punctuation">]</span>
      <span class="token key atrule">interval</span><span class="token punctuation">:</span> 30s
      <span class="token key atrule">timeout</span><span class="token punctuation">:</span> 2s
      <span class="token key atrule">retries</span><span class="token punctuation">:</span> <span class="token number">5</span>
    <span class="token key atrule">command</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&#39;historyserver&#39;</span><span class="token punctuation">]</span>

  <span class="token key atrule">hive</span><span class="token punctuation">:</span>
    <span class="token key atrule">image</span><span class="token punctuation">:</span> registry.cn<span class="token punctuation">-</span>hangzhou.aliyuncs.com/zhouwen/apache<span class="token punctuation">-</span>hadoop<span class="token punctuation">:</span>3.1.3
    <span class="token key atrule">ports</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> 9083<span class="token punctuation">:</span><span class="token number">9083</span>
      <span class="token punctuation">-</span> 10000<span class="token punctuation">:</span><span class="token number">10000</span>
    <span class="token key atrule">depends_on</span><span class="token punctuation">:</span>
      <span class="token key atrule">namenode</span><span class="token punctuation">:</span>
        <span class="token key atrule">condition</span><span class="token punctuation">:</span> service_healthy
        <span class="token key atrule">restart</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
      <span class="token key atrule">resourcemanager</span><span class="token punctuation">:</span>
        <span class="token key atrule">condition</span><span class="token punctuation">:</span> service_healthy
        <span class="token key atrule">restart</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
    <span class="token key atrule">env_file</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> hadoop.env
    <span class="token key atrule">healthcheck</span><span class="token punctuation">:</span>
      <span class="token key atrule">test</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>&#39;CMD<span class="token punctuation">-</span>SHELL&#39;ï¼Œ&#39;curl <span class="token punctuation">-</span>s hive<span class="token punctuation">:</span>10000 <span class="token punctuation">|</span><span class="token punctuation">|</span> exit 1&#39;<span class="token punctuation">]</span>
      <span class="token key atrule">interval</span><span class="token punctuation">:</span> 30s
      <span class="token key atrule">timeout</span><span class="token punctuation">:</span> 2s
      <span class="token key atrule">retries</span><span class="token punctuation">:</span> <span class="token number">5</span>
    <span class="token key atrule">command</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&#39;hive&#39;</span><span class="token punctuation">]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></details><h2 id="å°è¯•æ„å»ºè‡ªå·±çš„é•œåƒ" tabindex="-1"><a class="header-anchor" href="#å°è¯•æ„å»ºè‡ªå·±çš„é•œåƒ"><span>å°è¯•æ„å»ºè‡ªå·±çš„é•œåƒ</span></a></h2><h3 id="å®‰è£…-docker" tabindex="-1"><a class="header-anchor" href="#å®‰è£…-docker"><span>å®‰è£… docker</span></a></h3><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token comment">#æ‰€éœ€å®‰è£…åŒ…</span>
yum <span class="token function">install</span> <span class="token parameter variable">-y</span> yum-utils
<span class="token comment">#è®¾ç½®é•œåƒä»“åº“(é˜¿é‡Œäº‘)</span>
yum-config-manager <span class="token punctuation">\\</span>
--add-repo <span class="token punctuation">\\</span>
http://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo
<span class="token comment">#æ›´æ–°yumè½¯ä»¶åŒ…ç´¢å¼•</span>
yum makecache fast
<span class="token comment">#å®‰è£…dockerå¼•æ“</span>
yum <span class="token function">install</span> docker-ce docker-ce-cli containerd.io
<span class="token comment">#è®¾ç½®é˜¿é‡Œäº‘é•œåƒåŠ é€Ÿ(ç™»å…¥é˜¿é‡Œäº‘æ§åˆ¶å°æŸ¥çœ‹,è²Œä¼¼æ¯ä¸ªäººéƒ½ä¸ä¸€æ ·)</span>
<span class="token function">sudo</span> <span class="token function">mkdir</span> <span class="token parameter variable">-p</span> /etc/docker
<span class="token function">sudo</span> <span class="token function">tee</span> /etc/docker/daemon.json <span class="token operator">&lt;&lt;-</span><span class="token string">&#39;EOF&#39;
{
  &quot;registry-mirrors&quot;: [&quot;https://jsodkx19.mirror.aliyuncs.com&quot;]
}
EOF</span>
<span class="token function">sudo</span> systemctl daemon-reload
<span class="token function">sudo</span> systemctl restart <span class="token function">docker</span>

<span class="token comment">#æŸ¥çœ‹æ˜¯å¦å®‰è£…æˆåŠŸ</span>
<span class="token function">docker</span> version
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="ç›®å½•ç»“æ„" tabindex="-1"><a class="header-anchor" href="#ç›®å½•ç»“æ„"><span>ç›®å½•ç»“æ„</span></a></h3><div class="hint-container warning"><p class="hint-container-title">æ³¨æ„</p><p>hadoopï¼Œjdkï¼Œhiveï¼Œspark è¿™äº›éœ€è¦è‡ªå·±ä¸‹è½½</p><p>hive éœ€è¦è‡ªå·±ç¼–è¯‘ï¼Œå› ä¸ºè¦é€‚é…é«˜ç‰ˆæœ¬ spark å¼•æ“</p></div><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>hadoop-compose/
â”œâ”€â”€ docker-compose.yml
â”œâ”€â”€ Dockerfile
â”œâ”€â”€ hadoop.env
â””â”€â”€ resource
    â”œâ”€â”€ bootstrap.sh
    â”œâ”€â”€ config
    â”‚   â”œâ”€â”€ core-site.xml
    â”‚   â”œâ”€â”€ hdfs-site.xml
    â”‚   â”œâ”€â”€ hive-site.xml
    â”‚   â”œâ”€â”€ mapred-site.xml
    â”‚   â”œâ”€â”€ spark-default.conf
    â”‚   â”œâ”€â”€ spark-env.sh
    â”‚   â””â”€â”€ yarn-site.xml
    â”œâ”€â”€ hadoop-3.1.3.tar.gz
    â”œâ”€â”€ jdk-8u212-linux-x64.tar.gz
    â”œâ”€â”€ apache-hive-3.1.3-bin.tar.gz
    â””â”€â”€ spark-3.3.0-bin-without-hadoop.tgz
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="ç¼–å†™-dockerfile" tabindex="-1"><a class="header-anchor" href="#ç¼–å†™-dockerfile"><span>ç¼–å†™ dockerfile</span></a></h3><details class="hint-container details"><summary>Dockerfile</summary><div class="language-docker line-numbers-mode" data-ext="docker" data-title="hadoop-compose/Dockerfile"><pre class="language-docker"><code><span class="token instruction"><span class="token keyword">FROM</span> centos:centos7</span>

<span class="token instruction"><span class="token keyword">MAINTAINER</span> 597879949@qq.com</span>

<span class="token comment"># æ—¶åŒº</span>
<span class="token instruction"><span class="token keyword">RUN</span> ln -sfv /usr/share/zoneinfo/Asia/Shanghai /etc/localtime &amp;&amp; echo <span class="token string">&quot;Asia/Shanghai&quot;</span> &gt; /etc/timezone</span>
<span class="token instruction"><span class="token keyword">ENV</span> LANG=zh_CN.UTF-8</span>

<span class="token comment"># å·¥ä½œç›®å½•</span>
<span class="token instruction"><span class="token keyword">WORKDIR</span> /opt</span>

<span class="token comment"># å®‰è£…jdk</span>
<span class="token instruction"><span class="token keyword">ADD</span> ./resource/jdk-8u212-linux-x64.tar.gz /opt</span>
<span class="token instruction"><span class="token keyword">ENV</span> JAVA_HOME=/opt/jdk1.8.0_212</span>

<span class="token comment"># å®‰è£…hadoop</span>
<span class="token instruction"><span class="token keyword">ADD</span> ./resource/hadoop-3.1.3.tar.gz /opt</span>
<span class="token instruction"><span class="token keyword">ENV</span> HADOOP_HOME=/opt/hadoop-3.1.3</span>
<span class="token instruction"><span class="token keyword">ENV</span> HADOOP_COMMON_HOME=<span class="token variable">\${HADOOP_HOME}</span></span>
<span class="token instruction"><span class="token keyword">ENV</span> HADOOP_HDFS_HOME=<span class="token variable">\${HADOOP_HOME}</span></span>
<span class="token instruction"><span class="token keyword">ENV</span> HADOOP_MAPRED_HOME=<span class="token variable">\${HADOOP_HOME}</span></span>
<span class="token instruction"><span class="token keyword">ENV</span> HADOOP_YARN_HOME=<span class="token variable">\${HADOOP_HOME}</span></span>
<span class="token instruction"><span class="token keyword">ENV</span> HADOOP_CONF_DIR=<span class="token variable">\${HADOOP_HOME}</span>/etc/hadoop</span>

<span class="token comment"># å®‰è£…hive</span>
<span class="token instruction"><span class="token keyword">ADD</span> ./resource/apache-hive-3.1.3-bin.tar.gz /opt</span>
<span class="token instruction"><span class="token keyword">ENV</span> HIVE_HOME=/opt/apache-hive-3.1.3-bin</span>

<span class="token comment"># å®‰è£…spark</span>
<span class="token instruction"><span class="token keyword">ADD</span> ./resource/spark-3.3.0-bin-without-hadoop.tgz /opt</span>
<span class="token instruction"><span class="token keyword">ENV</span> SPARK_HOME=/opt/spark-3.3.0-bin-without-hadoop</span>

<span class="token comment"># é»˜è®¤å€¼</span>
<span class="token instruction"><span class="token keyword">ENV</span> HADOOP_HDFS_NN_WEB_PORT=9870</span>
<span class="token instruction"><span class="token keyword">ENV</span> HADOOP_HDFS_NN_RPC_PORT=8020</span>
<span class="token instruction"><span class="token keyword">ENV</span> HADOOP_HDFS_2NN_PORT=9868</span>
<span class="token instruction"><span class="token keyword">ENV</span> HADOOP_YARN_RM_WEB_PORT=8088</span>
<span class="token instruction"><span class="token keyword">ENV</span> HADOOP_MR_HISTORYSERVER_WEB_PORT=19888</span>
<span class="token instruction"><span class="token keyword">ENV</span> HADOOP_MR_HISTORYSERVER_PRC_PORT=10020</span>
<span class="token instruction"><span class="token keyword">ENV</span> HADOOP_HIVE_METASTORE_PORT=9083</span>
<span class="token instruction"><span class="token keyword">ENV</span> HADOOP_HIVE_HIVESERVER2_PORT=10000</span>

<span class="token comment"># æ‹·è´é…ç½®æ–‡ä»¶</span>
<span class="token instruction"><span class="token keyword">RUN</span> mkdir <span class="token variable">\${HADOOP_HOME}</span>/data &amp;&amp; mkdir <span class="token variable">\${HADOOP_HOME}</span>/logs &amp;&amp; mkdir /opt/config</span>
<span class="token instruction"><span class="token keyword">COPY</span> ./resource/config/* /opt/config</span>
<span class="token instruction"><span class="token keyword">COPY</span> ./resource/bootstrap.sh /opt</span>

<span class="token comment"># æš´éœ²ç«¯å£</span>
<span class="token instruction"><span class="token keyword">EXPOSE</span> <span class="token variable">\${HADOOP_HDFS_NN_WEB_PORT}</span></span>
<span class="token instruction"><span class="token keyword">EXPOSE</span> <span class="token variable">\${HADOOP_HDFS_NN_RPC_PORT}</span></span>
<span class="token instruction"><span class="token keyword">EXPOSE</span> <span class="token variable">\${HADOOP_YARN_RM_WEB_PORT}</span></span>
<span class="token instruction"><span class="token keyword">EXPOSE</span> <span class="token variable">\${HADOOP_MR_HISTORYSERVER_WEB_PORT}</span></span>
<span class="token instruction"><span class="token keyword">EXPOSE</span> <span class="token variable">\${HADOOP_HIVE_METASTORE_PORT}</span></span>
<span class="token instruction"><span class="token keyword">EXPOSE</span> <span class="token variable">\${HADOOP_HIVE_HIVESERVER2_PORT}</span></span>

<span class="token instruction"><span class="token keyword">ENTRYPOINT</span> [<span class="token string">&quot;sh&quot;</span>,<span class="token string">&quot;./bootstrap.sh&quot;</span>]</span>
<span class="token instruction"><span class="token keyword">CMD</span> [<span class="token string">&quot;all&quot;</span>]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></details><h3 id="é…ç½®æ–‡ä»¶" tabindex="-1"><a class="header-anchor" href="#é…ç½®æ–‡ä»¶"><span>é…ç½®æ–‡ä»¶</span></a></h3>`,27),g={class:"hint-container details"},h=n("summary",null,"é…ç½®æ–‡ä»¶åˆ—è¡¨",-1),_=n("div",{class:"language-xml line-numbers-mode","data-ext":"xml","data-title":"hadoop-compose/resource/config/core-site.xml"},[n("pre",{class:"language-xml"},[n("code",null,[n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"<"),s("configuration")]),n("span",{class:"token punctuation"},">")]),s(`
  `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"<"),s("property")]),n("span",{class:"token punctuation"},">")]),s(`
    `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"<"),s("name")]),n("span",{class:"token punctuation"},">")]),s("fs.defaultFS"),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"</"),s("name")]),n("span",{class:"token punctuation"},">")]),s(`
    `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"<"),s("value")]),n("span",{class:"token punctuation"},">")]),s("hdfs://${HADOOP_HDFS_NN_ADDRESS}:${HADOOP_HDFS_NN_RPC_PORT}"),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"</"),s("value")]),n("span",{class:"token punctuation"},">")]),s(`
  `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"</"),s("property")]),n("span",{class:"token punctuation"},">")]),s(`
  `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"<"),s("property")]),n("span",{class:"token punctuation"},">")]),s(`
    `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"<"),s("name")]),n("span",{class:"token punctuation"},">")]),s("hadoop.tmp.dir"),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"</"),s("name")]),n("span",{class:"token punctuation"},">")]),s(`
    `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"<"),s("value")]),n("span",{class:"token punctuation"},">")]),s("${HADOOP_HOME}/data"),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"</"),s("value")]),n("span",{class:"token punctuation"},">")]),s(`
  `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"</"),s("property")]),n("span",{class:"token punctuation"},">")]),s(`
  `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"<"),s("property")]),n("span",{class:"token punctuation"},">")]),s(`
    `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"<"),s("name")]),n("span",{class:"token punctuation"},">")]),s("hadoop.http.staticuser.user"),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"</"),s("name")]),n("span",{class:"token punctuation"},">")]),s(`
    `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"<"),s("value")]),n("span",{class:"token punctuation"},">")]),s("root"),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"</"),s("value")]),n("span",{class:"token punctuation"},">")]),s(`
  `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"</"),s("property")]),n("span",{class:"token punctuation"},">")]),s(`
  `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"<"),s("property")]),n("span",{class:"token punctuation"},">")]),s(`
    `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"<"),s("name")]),n("span",{class:"token punctuation"},">")]),s("hadoop.proxyuser.root.hosts"),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"</"),s("name")]),n("span",{class:"token punctuation"},">")]),s(`
    `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"<"),s("value")]),n("span",{class:"token punctuation"},">")]),s("*"),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"</"),s("value")]),n("span",{class:"token punctuation"},">")]),s(`
  `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"</"),s("property")]),n("span",{class:"token punctuation"},">")]),s(`
  `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"<"),s("property")]),n("span",{class:"token punctuation"},">")]),s(`
    `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"<"),s("name")]),n("span",{class:"token punctuation"},">")]),s("hadoop.proxyuser.root.groups"),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"</"),s("name")]),n("span",{class:"token punctuation"},">")]),s(`
    `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"<"),s("value")]),n("span",{class:"token punctuation"},">")]),s("*"),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"</"),s("value")]),n("span",{class:"token punctuation"},">")]),s(`
  `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"</"),s("property")]),n("span",{class:"token punctuation"},">")]),s(`
  `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"<"),s("property")]),n("span",{class:"token punctuation"},">")]),s(`
    `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"<"),s("name")]),n("span",{class:"token punctuation"},">")]),s("hadoop.proxyuser.root.users"),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"</"),s("name")]),n("span",{class:"token punctuation"},">")]),s(`
    `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"<"),s("value")]),n("span",{class:"token punctuation"},">")]),s("*"),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"</"),s("value")]),n("span",{class:"token punctuation"},">")]),s(`
  `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"</"),s("property")]),n("span",{class:"token punctuation"},">")]),s(`
`),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"</"),s("configuration")]),n("span",{class:"token punctuation"},">")]),s(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),O=n("div",{class:"language-xml line-numbers-mode","data-ext":"xml","data-title":"hadoop-compose/resource/config/hdfs-site.xml"},[n("pre",{class:"language-xml"},[n("code",null,[n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"<"),s("configuration")]),n("span",{class:"token punctuation"},">")]),s(`
  `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"<"),s("property")]),n("span",{class:"token punctuation"},">")]),s(`
    `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"<"),s("name")]),n("span",{class:"token punctuation"},">")]),s("dfs.namenode.http-address"),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"</"),s("name")]),n("span",{class:"token punctuation"},">")]),s(`
    `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"<"),s("value")]),n("span",{class:"token punctuation"},">")]),s("${HADOOP_HDFS_NN_ADDRESS}:${HADOOP_HDFS_NN_WEB_PORT}"),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"</"),s("value")]),n("span",{class:"token punctuation"},">")]),s(`
  `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"</"),s("property")]),n("span",{class:"token punctuation"},">")]),s(`
  `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"<"),s("property")]),n("span",{class:"token punctuation"},">")]),s(`
    `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"<"),s("name")]),n("span",{class:"token punctuation"},">")]),s("dfs.namenode.secondary.http-address"),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"</"),s("name")]),n("span",{class:"token punctuation"},">")]),s(`
    `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"<"),s("value")]),n("span",{class:"token punctuation"},">")]),s("${HADOOP_HDFS_NN_ADDRESS}:${HADOOP_HDFS_2NN_PORT}"),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"</"),s("value")]),n("span",{class:"token punctuation"},">")]),s(`
  `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"</"),s("property")]),n("span",{class:"token punctuation"},">")]),s(`
  `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"<"),s("property")]),n("span",{class:"token punctuation"},">")]),s(`
    `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"<"),s("name")]),n("span",{class:"token punctuation"},">")]),s("dfs.replication"),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"</"),s("name")]),n("span",{class:"token punctuation"},">")]),s(`
    `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"<"),s("value")]),n("span",{class:"token punctuation"},">")]),s("1"),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"</"),s("value")]),n("span",{class:"token punctuation"},">")]),s(`
  `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"</"),s("property")]),n("span",{class:"token punctuation"},">")]),s(`
`),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"</"),s("configuration")]),n("span",{class:"token punctuation"},">")]),s(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),y=n("div",{class:"language-xml line-numbers-mode","data-ext":"xml","data-title":"hadoop-compose/resource/config/yarn-site.xml"},[n("pre",{class:"language-xml"},[n("code",null,[n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"<"),s("configuration")]),n("span",{class:"token punctuation"},">")]),s(`
  `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"<"),s("property")]),n("span",{class:"token punctuation"},">")]),s(`
    `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"<"),s("name")]),n("span",{class:"token punctuation"},">")]),s("yarn.nodemanager.aux-services"),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"</"),s("name")]),n("span",{class:"token punctuation"},">")]),s(`
    `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"<"),s("value")]),n("span",{class:"token punctuation"},">")]),s("mapreduce_shuffle"),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"</"),s("value")]),n("span",{class:"token punctuation"},">")]),s(`
  `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"</"),s("property")]),n("span",{class:"token punctuation"},">")]),s(`
  `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"<"),s("property")]),n("span",{class:"token punctuation"},">")]),s(`
    `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"<"),s("name")]),n("span",{class:"token punctuation"},">")]),s("yarn.resourcemanager.hostname"),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"</"),s("name")]),n("span",{class:"token punctuation"},">")]),s(`
    `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"<"),s("value")]),n("span",{class:"token punctuation"},">")]),s("${HADOOP_YARN_RM_ADDRESS}"),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"</"),s("value")]),n("span",{class:"token punctuation"},">")]),s(`
  `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"</"),s("property")]),n("span",{class:"token punctuation"},">")]),s(`
  `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"<"),s("property")]),n("span",{class:"token punctuation"},">")]),s(`
    `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"<"),s("name")]),n("span",{class:"token punctuation"},">")]),s("yarn.nodemanager.env-whitelist"),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"</"),s("name")]),n("span",{class:"token punctuation"},">")]),s(`
    `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"<"),s("value")]),n("span",{class:"token punctuation"},">")]),s("JAVA_HOME,HADOOP_COMMON_HOME,HADOOP_HDFS_HOME,HADOOP_CONF_DIR,CLASSPATH_PREPEND_DISTCACHE,HADOOP_YARN_HOME,HADOOP_MAPRED_HOME"),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"</"),s("value")]),n("span",{class:"token punctuation"},">")]),s(`
  `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"</"),s("property")]),n("span",{class:"token punctuation"},">")]),s(`
  `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"<"),s("property")]),n("span",{class:"token punctuation"},">")]),s(`
    `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"<"),s("name")]),n("span",{class:"token punctuation"},">")]),s("yarn.log-aggregation-enable"),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"</"),s("name")]),n("span",{class:"token punctuation"},">")]),s(`
    `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"<"),s("value")]),n("span",{class:"token punctuation"},">")]),s("true"),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"</"),s("value")]),n("span",{class:"token punctuation"},">")]),s(`
  `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"</"),s("property")]),n("span",{class:"token punctuation"},">")]),s(`
  `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"<"),s("property")]),n("span",{class:"token punctuation"},">")]),s(`
    `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"<"),s("name")]),n("span",{class:"token punctuation"},">")]),s("yarn.log.server.url"),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"</"),s("name")]),n("span",{class:"token punctuation"},">")]),s(`
    `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"<"),s("value")]),n("span",{class:"token punctuation"},">")]),s("http://${HADOOP_MR_HISTORYSERVER_ADDRESS}:${HADOOP_MR_HISTORYSERVER_WEB_PORT}/jobhistory/logs"),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"</"),s("value")]),n("span",{class:"token punctuation"},">")]),s(`
  `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"</"),s("property")]),n("span",{class:"token punctuation"},">")]),s(`
  `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"<"),s("property")]),n("span",{class:"token punctuation"},">")]),s(`
    `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"<"),s("name")]),n("span",{class:"token punctuation"},">")]),s("yarn.log-aggregation.retain-seconds"),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"</"),s("name")]),n("span",{class:"token punctuation"},">")]),s(`
    `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"<"),s("value")]),n("span",{class:"token punctuation"},">")]),s("604800"),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"</"),s("value")]),n("span",{class:"token punctuation"},">")]),s(`
  `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"</"),s("property")]),n("span",{class:"token punctuation"},">")]),s(`
  `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"<"),s("property")]),n("span",{class:"token punctuation"},">")]),s(`
    `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"<"),s("name")]),n("span",{class:"token punctuation"},">")]),s("yarn.nodemanager.resource.memory-mb"),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"</"),s("name")]),n("span",{class:"token punctuation"},">")]),s(`
    `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"<"),s("value")]),n("span",{class:"token punctuation"},">")]),s("8192"),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"</"),s("value")]),n("span",{class:"token punctuation"},">")]),s(`
  `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"</"),s("property")]),n("span",{class:"token punctuation"},">")]),s(`
  `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"<"),s("property")]),n("span",{class:"token punctuation"},">")]),s(`
    `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"<"),s("name")]),n("span",{class:"token punctuation"},">")]),s("yarn.nodemanager.resource.cpu-vcores"),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"</"),s("name")]),n("span",{class:"token punctuation"},">")]),s(`
    `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"<"),s("value")]),n("span",{class:"token punctuation"},">")]),s("4"),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"</"),s("value")]),n("span",{class:"token punctuation"},">")]),s(`
  `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"</"),s("property")]),n("span",{class:"token punctuation"},">")]),s(`
  `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"<"),s("property")]),n("span",{class:"token punctuation"},">")]),s(`
    `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"<"),s("name")]),n("span",{class:"token punctuation"},">")]),s("yarn.scheduler.minimum-allocation-mb"),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"</"),s("name")]),n("span",{class:"token punctuation"},">")]),s(`
    `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"<"),s("value")]),n("span",{class:"token punctuation"},">")]),s("1024"),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"</"),s("value")]),n("span",{class:"token punctuation"},">")]),s(`
  `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"</"),s("property")]),n("span",{class:"token punctuation"},">")]),s(`
  `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"<"),s("property")]),n("span",{class:"token punctuation"},">")]),s(`
    `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"<"),s("name")]),n("span",{class:"token punctuation"},">")]),s("yarn.scheduler.maximum-allocation-mb"),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"</"),s("name")]),n("span",{class:"token punctuation"},">")]),s(`
    `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"<"),s("value")]),n("span",{class:"token punctuation"},">")]),s("2048"),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"</"),s("value")]),n("span",{class:"token punctuation"},">")]),s(`
  `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"</"),s("property")]),n("span",{class:"token punctuation"},">")]),s(`
  `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"<"),s("property")]),n("span",{class:"token punctuation"},">")]),s(`
    `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"<"),s("name")]),n("span",{class:"token punctuation"},">")]),s("yarn.scheduler.minimum-allocation-vcores"),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"</"),s("name")]),n("span",{class:"token punctuation"},">")]),s(`
    `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"<"),s("value")]),n("span",{class:"token punctuation"},">")]),s("1"),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"</"),s("value")]),n("span",{class:"token punctuation"},">")]),s(`
  `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"</"),s("property")]),n("span",{class:"token punctuation"},">")]),s(`
  `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"<"),s("property")]),n("span",{class:"token punctuation"},">")]),s(`
    `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"<"),s("name")]),n("span",{class:"token punctuation"},">")]),s("yarn.scheduler.maximum-allocation-vcores"),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"</"),s("name")]),n("span",{class:"token punctuation"},">")]),s(`
    `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"<"),s("value")]),n("span",{class:"token punctuation"},">")]),s("2"),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"</"),s("value")]),n("span",{class:"token punctuation"},">")]),s(`
  `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"</"),s("property")]),n("span",{class:"token punctuation"},">")]),s(`
  `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"<"),s("property")]),n("span",{class:"token punctuation"},">")]),s(`
    `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"<"),s("name")]),n("span",{class:"token punctuation"},">")]),s("yarn.nodemanager.vmem-check-enabled"),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"</"),s("name")]),n("span",{class:"token punctuation"},">")]),s(`
    `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"<"),s("value")]),n("span",{class:"token punctuation"},">")]),s("false"),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"</"),s("value")]),n("span",{class:"token punctuation"},">")]),s(`
  `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"</"),s("property")]),n("span",{class:"token punctuation"},">")]),s(`
`),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"</"),s("configuration")]),n("span",{class:"token punctuation"},">")]),s(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),f=n("div",{class:"language-xml line-numbers-mode","data-ext":"xml","data-title":"hadoop-compose/resource/config/mapred-site.xml"},[n("pre",{class:"language-xml"},[n("code",null,[n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"<"),s("configuration")]),n("span",{class:"token punctuation"},">")]),s(`
  `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"<"),s("property")]),n("span",{class:"token punctuation"},">")]),s(`
    `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"<"),s("name")]),n("span",{class:"token punctuation"},">")]),s("mapreduce.framework.name"),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"</"),s("name")]),n("span",{class:"token punctuation"},">")]),s(`
    `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"<"),s("value")]),n("span",{class:"token punctuation"},">")]),s("yarn"),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"</"),s("value")]),n("span",{class:"token punctuation"},">")]),s(`
  `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"</"),s("property")]),n("span",{class:"token punctuation"},">")]),s(`
  `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"<"),s("property")]),n("span",{class:"token punctuation"},">")]),s(`
    `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"<"),s("name")]),n("span",{class:"token punctuation"},">")]),s("mapreduce.jobhistory.address"),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"</"),s("name")]),n("span",{class:"token punctuation"},">")]),s(`
    `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"<"),s("value")]),n("span",{class:"token punctuation"},">")]),s("${HADOOP_MR_HISTORYSERVER_ADDRESS}:10020"),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"</"),s("value")]),n("span",{class:"token punctuation"},">")]),s(`
  `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"</"),s("property")]),n("span",{class:"token punctuation"},">")]),s(`
  `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"<"),s("property")]),n("span",{class:"token punctuation"},">")]),s(`
    `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"<"),s("name")]),n("span",{class:"token punctuation"},">")]),s("mapreduce.jobhistory.webapp.address"),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"</"),s("name")]),n("span",{class:"token punctuation"},">")]),s(`
    `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"<"),s("value")]),n("span",{class:"token punctuation"},">")]),s("${HADOOP_MR_HISTORYSERVER_ADDRESS}:${HADOOP_MR_HISTORYSERVER_WEB_PORT}"),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"</"),s("value")]),n("span",{class:"token punctuation"},">")]),s(`
  `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"</"),s("property")]),n("span",{class:"token punctuation"},">")]),s(`
`),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"</"),s("configuration")]),n("span",{class:"token punctuation"},">")]),s(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),H=n("div",{class:"language-xml line-numbers-mode","data-ext":"xml","data-title":"hadoop-compose/resource/config/hive-site.xml"},[n("pre",{class:"language-xml"},[n("code",null,[n("span",{class:"token prolog"},'<?xml version="1.0"?>'),s(`
`),n("span",{class:"token prolog"},'<?xml-stylesheet type="text/xsl" href="configuration.xsl"?>'),s(`
`),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"<"),s("configuration")]),n("span",{class:"token punctuation"},">")]),s(`
  `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"<"),s("property")]),n("span",{class:"token punctuation"},">")]),s(`
    `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"<"),s("name")]),n("span",{class:"token punctuation"},">")]),s("hive.metastore.schema.verification"),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"</"),s("name")]),n("span",{class:"token punctuation"},">")]),s(`
    `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"<"),s("value")]),n("span",{class:"token punctuation"},">")]),s("false"),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"</"),s("value")]),n("span",{class:"token punctuation"},">")]),s(`
  `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"</"),s("property")]),n("span",{class:"token punctuation"},">")]),s(`
  `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"<"),s("property")]),n("span",{class:"token punctuation"},">")]),s(`
    `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"<"),s("name")]),n("span",{class:"token punctuation"},">")]),s("hive.metastore.event.db.notification.api.auth"),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"</"),s("name")]),n("span",{class:"token punctuation"},">")]),s(`
    `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"<"),s("value")]),n("span",{class:"token punctuation"},">")]),s("false"),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"</"),s("value")]),n("span",{class:"token punctuation"},">")]),s(`
  `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"</"),s("property")]),n("span",{class:"token punctuation"},">")]),s(`
  `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"<"),s("property")]),n("span",{class:"token punctuation"},">")]),s(`
    `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"<"),s("name")]),n("span",{class:"token punctuation"},">")]),s("hive.metastore.warehouse.dir"),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"</"),s("name")]),n("span",{class:"token punctuation"},">")]),s(`
    `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"<"),s("value")]),n("span",{class:"token punctuation"},">")]),s("/user/hive/warehouse"),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"</"),s("value")]),n("span",{class:"token punctuation"},">")]),s(`
  `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"</"),s("property")]),n("span",{class:"token punctuation"},">")]),s(`
  `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"<"),s("property")]),n("span",{class:"token punctuation"},">")]),s(`
    `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"<"),s("name")]),n("span",{class:"token punctuation"},">")]),s("hive.metastore.uris"),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"</"),s("name")]),n("span",{class:"token punctuation"},">")]),s(`
    `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"<"),s("value")]),n("span",{class:"token punctuation"},">")]),s("thrift://${HADOOP_HIVE_ADDRESS}:${HADOOP_HIVE_METASTORE_PORT}"),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"</"),s("value")]),n("span",{class:"token punctuation"},">")]),s(`
  `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"</"),s("property")]),n("span",{class:"token punctuation"},">")]),s(`
  `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"<"),s("property")]),n("span",{class:"token punctuation"},">")]),s(`
    `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"<"),s("name")]),n("span",{class:"token punctuation"},">")]),s("hive.server2.thrift.bind.host"),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"</"),s("name")]),n("span",{class:"token punctuation"},">")]),s(`
    `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"<"),s("value")]),n("span",{class:"token punctuation"},">")]),s("${HADOOP_HIVE_ADDRESS}"),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"</"),s("value")]),n("span",{class:"token punctuation"},">")]),s(`
  `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"</"),s("property")]),n("span",{class:"token punctuation"},">")]),s(`
  `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"<"),s("property")]),n("span",{class:"token punctuation"},">")]),s(`
    `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"<"),s("name")]),n("span",{class:"token punctuation"},">")]),s("hive.server2.thrift.port"),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"</"),s("name")]),n("span",{class:"token punctuation"},">")]),s(`
    `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"<"),s("value")]),n("span",{class:"token punctuation"},">")]),s("${HADOOP_HIVE_HIVESERVER2_PORT}"),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"</"),s("value")]),n("span",{class:"token punctuation"},">")]),s(`
  `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"</"),s("property")]),n("span",{class:"token punctuation"},">")]),s(`
  `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"<"),s("property")]),n("span",{class:"token punctuation"},">")]),s(`
    `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"<"),s("name")]),n("span",{class:"token punctuation"},">")]),s("spark.yarn.jars"),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"</"),s("name")]),n("span",{class:"token punctuation"},">")]),s(`
    `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"<"),s("value")]),n("span",{class:"token punctuation"},">")]),s("hdfs://${HADOOP_HDFS_NN_ADDRESS}:${HADOOP_HDFS_NN_RPC_PORT}/spark/spark-jars/*"),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"</"),s("value")]),n("span",{class:"token punctuation"},">")]),s(`
  `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"</"),s("property")]),n("span",{class:"token punctuation"},">")]),s(`
  `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"<"),s("property")]),n("span",{class:"token punctuation"},">")]),s(`
    `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"<"),s("name")]),n("span",{class:"token punctuation"},">")]),s("hive.execution.engine"),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"</"),s("name")]),n("span",{class:"token punctuation"},">")]),s(`
    `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"<"),s("value")]),n("span",{class:"token punctuation"},">")]),s("spark"),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"</"),s("value")]),n("span",{class:"token punctuation"},">")]),s(`
  `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"</"),s("property")]),n("span",{class:"token punctuation"},">")]),s(`
`),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"</"),s("configuration")]),n("span",{class:"token punctuation"},">")]),s(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),D=n("div",{class:"language-bash line-numbers-mode","data-ext":"sh","data-title":"hadoop-compose/resource/config/spark-env.sh"},[n("pre",{class:"language-bash"},[n("code",null,[n("span",{class:"token shebang important"},"#!/usr/bin/env bash"),s(`
`),n("span",{class:"token builtin class-name"},"export"),s(),n("span",{class:"token assign-left variable"},"SPARK_DIST_CLASSPATH"),n("span",{class:"token operator"},"="),n("span",{class:"token variable"},[n("span",{class:"token variable"},"$("),s("$"),n("span",{class:"token punctuation"},"{"),s("HADOOP_HOME"),n("span",{class:"token punctuation"},"}"),s("/bin/hadoop classpath"),n("span",{class:"token variable"},")")]),s(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),E=n("div",{class:"language-conf line-numbers-mode","data-ext":"conf","data-title":"hadoop-compose/resource/config/spark-default.conf"},[n("pre",{class:"language-conf"},[n("code",null,`spark.master                yarn
spark.eventLog.enabled      true
spark.eventLog.dir          hdfs://\${HADOOP_HDFS_NN_ADDRESS}:\${HADOOP_HDFS_NN_RPC_PORT}/spark/spark-history
spark.executor.memory       1g
spark.driver.memory         1g
`)]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),A=p(`<h3 id="æ ¸å¿ƒå¯åŠ¨æ–‡ä»¶" tabindex="-1"><a class="header-anchor" href="#æ ¸å¿ƒå¯åŠ¨æ–‡ä»¶"><span>æ ¸å¿ƒå¯åŠ¨æ–‡ä»¶</span></a></h3><details class="hint-container details"><summary>bootstrap.sh</summary><div class="language-bash line-numbers-mode" data-ext="sh" data-title="hadoop-compose/resource/bootstrap.sh"><pre class="language-bash"><code><span class="token shebang important">#!/bin/bash</span>

<span class="token builtin class-name">set</span> <span class="token parameter variable">-euo</span> pipefail

<span class="token keyword">function</span> <span class="token function-name function">print_title</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token builtin class-name">echo</span> <span class="token parameter variable">-e</span> <span class="token string">&quot;<span class="token entity" title="\\n">\\n</span><span class="token entity" title="\\n">\\n</span>------------------------ <span class="token variable">$1</span> ------------------------&quot;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function-name function">wait_for</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token builtin class-name">echo</span> Waiting <span class="token keyword">for</span> <span class="token variable">$1</span> to listen on <span class="token variable">$2</span><span class="token punctuation">..</span>.
    <span class="token keyword">while</span> <span class="token operator">!</span> <span class="token function">curl</span> <span class="token variable">$1</span><span class="token builtin class-name">:</span><span class="token variable">$2</span> <span class="token operator">&gt;</span> /dev/null <span class="token operator"><span class="token file-descriptor important">2</span>&gt;</span><span class="token file-descriptor important">&amp;1</span><span class="token punctuation">;</span> <span class="token keyword">do</span> <span class="token builtin class-name">echo</span> waiting<span class="token punctuation">..</span>.<span class="token punctuation">;</span> <span class="token function">sleep</span> 1s<span class="token punctuation">;</span> <span class="token keyword">done</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function-name function">start_name_node</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token operator">!</span> <span class="token parameter variable">-f</span> /tmp/namenode-formated <span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">then</span>
        <span class="token variable">\${HADOOP_HOME}</span>/bin/hdfs namenode <span class="token parameter variable">-format</span> <span class="token operator">&gt;</span>/tmp/namenode-formated
    <span class="token keyword">fi</span>
    print_title <span class="token string">&quot;starting namenode&quot;</span>
    <span class="token variable">\${HADOOP_HOME}</span>/bin/hdfs <span class="token parameter variable">--loglevel</span> INFO <span class="token parameter variable">--daemon</span> start namenode

    print_title <span class="token string">&quot;starting secondarynamenode&quot;</span>
    wait_for <span class="token variable">\${HADOOP_HDFS_NN_ADDRESS}</span> <span class="token variable">\${HADOOP_HDFS_NN_WEB_PORT}</span>
    <span class="token variable">\${HADOOP_HOME}</span>/bin/hdfs <span class="token parameter variable">--loglevel</span> INFO <span class="token parameter variable">--daemon</span> start secondarynamenode
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function-name function">start_data_node</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    print_title <span class="token string">&quot;starting datanode&quot;</span>
    wait_for <span class="token variable">\${HADOOP_HDFS_NN_ADDRESS}</span> <span class="token variable">\${HADOOP_HDFS_NN_WEB_PORT}</span>
    <span class="token variable">\${HADOOP_HOME}</span>/bin/hdfs <span class="token parameter variable">--loglevel</span> INFO <span class="token parameter variable">--daemon</span> start datanode
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function-name function">start_resource_manager</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    print_title <span class="token string">&quot;starting resourcemanager&quot;</span>
    <span class="token variable">\${HADOOP_HOME}</span>/bin/yarn <span class="token parameter variable">--loglevel</span> INFO <span class="token parameter variable">--daemon</span> start resourcemanager
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function-name function">start_node_manager</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    print_title <span class="token string">&quot;starting nodemanager&quot;</span>
    wait_for <span class="token variable">\${HADOOP_YARN_RM_ADDRESS}</span> <span class="token variable">\${HADOOP_YARN_RM_WEB_PORT}</span>
    <span class="token variable">\${HADOOP_HOME}</span>/bin/yarn <span class="token parameter variable">--loglevel</span> INFO <span class="token parameter variable">--daemon</span> start nodemanager
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function-name function">start_history_server</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    print_title <span class="token string">&quot;starting historyserver&quot;</span>
    wait_for <span class="token variable">\${HADOOP_YARN_RM_ADDRESS}</span> <span class="token variable">\${HADOOP_YARN_RM_WEB_PORT}</span>
    <span class="token variable">\${HADOOP_HOME}</span>/bin/mapred <span class="token parameter variable">--loglevel</span> INFO  <span class="token parameter variable">--daemon</span>  start historyserver
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function-name function">start_hive</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    print_title <span class="token string">&quot;starting hive&quot;</span>
    wait_for <span class="token variable">\${HADOOP_HDFS_NN_ADDRESS}</span> <span class="token variable">\${HADOOP_HDFS_NN_WEB_PORT}</span>

    <span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token operator">!</span> <span class="token parameter variable">-f</span> /tmp/hive-formated <span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">then</span>
        <span class="token variable">\${HADOOP_HOME}</span>/bin/hdfs dfsadmin <span class="token parameter variable">-safemode</span> <span class="token function">wait</span>
        <span class="token variable">\${HADOOP_HOME}</span>/bin/hdfs dfs <span class="token parameter variable">-mkdir</span> <span class="token parameter variable">-p</span> /spark/spark-history
        <span class="token variable">\${HADOOP_HOME}</span>/bin/hdfs dfs <span class="token parameter variable">-mkdir</span> <span class="token parameter variable">-p</span> /spark/spark-jars
        <span class="token variable">\${HADOOP_HOME}</span>/bin/hdfs dfs <span class="token parameter variable">-put</span> <span class="token variable">\${SPARK_HOME}</span>/jars/* /spark/spark-jars
        <span class="token variable">\${HIVE_HOME}</span>/bin/schematool <span class="token parameter variable">-dbType</span> derby <span class="token parameter variable">-initSchema</span> <span class="token operator">&gt;</span>  /tmp/hive-formated
    <span class="token keyword">fi</span>

    <span class="token function">nohup</span> <span class="token variable">\${HIVE_HOME}</span>/bin/hive <span class="token parameter variable">--service</span> metastore <span class="token operator">&gt;</span> <span class="token variable">\${HADOOP_HOME}</span>/logs/metastore.log <span class="token operator"><span class="token file-descriptor important">2</span>&gt;</span><span class="token file-descriptor important">&amp;1</span> <span class="token operator">&amp;</span>
    <span class="token function">nohup</span> <span class="token variable">\${HIVE_HOME}</span>/bin/hive <span class="token parameter variable">--service</span> hiveserver2 <span class="token operator">&gt;</span> <span class="token variable">\${HADOOP_HOME}</span>/logs/hiveserver2.log <span class="token operator"><span class="token file-descriptor important">2</span>&gt;</span><span class="token file-descriptor important">&amp;1</span> <span class="token operator">&amp;</span>
<span class="token punctuation">}</span>

<span class="token comment"># The default value for a single container is hostname</span>
<span class="token builtin class-name">export</span> <span class="token assign-left variable">HADOOP_HDFS_NN_ADDRESS</span><span class="token operator">=</span><span class="token variable">\${HADOOP_HDFS_NN_ADDRESS<span class="token operator">:-</span>$(hostname)}</span>
<span class="token builtin class-name">export</span> <span class="token assign-left variable">HADOOP_YARN_RM_ADDRESS</span><span class="token operator">=</span><span class="token variable">\${HADOOP_YARN_RM_ADDRESS<span class="token operator">:-</span>$(hostname)}</span>
<span class="token builtin class-name">export</span> <span class="token assign-left variable">HADOOP_MR_HISTORYSERVER_ADDRESS</span><span class="token operator">=</span><span class="token variable">\${HADOOP_MR_HISTORYSERVER_ADDRESS<span class="token operator">:-</span>$(hostname)}</span>
<span class="token builtin class-name">export</span> <span class="token assign-left variable">HADOOP_HIVE_ADDRESS</span><span class="token operator">=</span><span class="token variable">\${HADOOP_HIVE_ADDRESS<span class="token operator">:-</span>$(hostname)}</span>

<span class="token punctuation">{</span> <span class="token builtin class-name">echo</span> <span class="token string">&#39;cat &lt;&lt; EOF&#39;</span> <span class="token punctuation">;</span> <span class="token function">cat</span> /opt/config/core-site.xml <span class="token punctuation">;</span> <span class="token builtin class-name">echo</span> <span class="token parameter variable">-e</span> <span class="token string">&#39;\\nEOF&#39;</span> <span class="token punctuation">;</span> <span class="token punctuation">}</span> <span class="token operator">|</span> <span class="token function">sh</span> <span class="token operator">&gt;</span> <span class="token variable">\${HADOOP_CONF_DIR}</span>/core-site.xml
<span class="token punctuation">{</span> <span class="token builtin class-name">echo</span> <span class="token string">&#39;cat &lt;&lt; EOF&#39;</span> <span class="token punctuation">;</span> <span class="token function">cat</span> /opt/config/hdfs-site.xml <span class="token punctuation">;</span> <span class="token builtin class-name">echo</span> <span class="token parameter variable">-e</span> <span class="token string">&#39;\\nEOF&#39;</span> <span class="token punctuation">;</span> <span class="token punctuation">}</span> <span class="token operator">|</span> <span class="token function">sh</span> <span class="token operator">&gt;</span> <span class="token variable">\${HADOOP_CONF_DIR}</span>/hdfs-site.xml
<span class="token punctuation">{</span> <span class="token builtin class-name">echo</span> <span class="token string">&#39;cat &lt;&lt; EOF&#39;</span> <span class="token punctuation">;</span> <span class="token function">cat</span> /opt/config/mapred-site.xml <span class="token punctuation">;</span> <span class="token builtin class-name">echo</span> <span class="token parameter variable">-e</span> <span class="token string">&#39;\\nEOF&#39;</span> <span class="token punctuation">;</span> <span class="token punctuation">}</span> <span class="token operator">|</span> <span class="token function">sh</span> <span class="token operator">&gt;</span> <span class="token variable">\${HADOOP_CONF_DIR}</span>/mapred-site.xml
<span class="token punctuation">{</span> <span class="token builtin class-name">echo</span> <span class="token string">&#39;cat &lt;&lt; EOF&#39;</span> <span class="token punctuation">;</span> <span class="token function">cat</span> /opt/config/yarn-site.xml <span class="token punctuation">;</span> <span class="token builtin class-name">echo</span> <span class="token parameter variable">-e</span> <span class="token string">&#39;\\nEOF&#39;</span> <span class="token punctuation">;</span> <span class="token punctuation">}</span> <span class="token operator">|</span> <span class="token function">sh</span> <span class="token operator">&gt;</span> <span class="token variable">\${HADOOP_CONF_DIR}</span>/yarn-site.xml
<span class="token punctuation">{</span> <span class="token builtin class-name">echo</span> <span class="token string">&#39;cat &lt;&lt; EOF&#39;</span> <span class="token punctuation">;</span> <span class="token function">cat</span> /opt/config/hive-site.xml <span class="token punctuation">;</span> <span class="token builtin class-name">echo</span> <span class="token parameter variable">-e</span> <span class="token string">&#39;\\nEOF&#39;</span> <span class="token punctuation">;</span> <span class="token punctuation">}</span> <span class="token operator">|</span> <span class="token function">sh</span> <span class="token operator">&gt;</span> <span class="token variable">\${HIVE_HOME}</span>/conf/hive-site.xml
<span class="token punctuation">{</span> <span class="token builtin class-name">echo</span> <span class="token string">&#39;cat &lt;&lt; EOF&#39;</span> <span class="token punctuation">;</span> <span class="token function">cat</span> /opt/config/spark-default.conf <span class="token punctuation">;</span> <span class="token builtin class-name">echo</span> <span class="token parameter variable">-e</span> <span class="token string">&#39;\\nEOF&#39;</span> <span class="token punctuation">;</span> <span class="token punctuation">}</span> <span class="token operator">|</span> <span class="token function">sh</span> <span class="token operator">&gt;</span> <span class="token variable">\${HIVE_HOME}</span>/conf/spark-default.conf
<span class="token function">cp</span> /opt/config/spark-env.sh <span class="token variable">\${SPARK_HOME}</span>/conf

<span class="token keyword">case</span> <span class="token variable">$1</span> <span class="token keyword">in</span>
    all<span class="token punctuation">)</span>
        start_name_node
        start_data_node
        start_resource_manager
        start_node_manager
        start_history_server
        start_hive
        <span class="token builtin class-name">cd</span> <span class="token variable">\${HADOOP_HOME}</span>/logs
        <span class="token function">tail</span> <span class="token parameter variable">-f</span> *.log <span class="token operator">|</span> <span class="token function">awk</span> <span class="token string">&#39;/^==&gt; / {fileName=substr($0ï¼Œ5ï¼Œlength-8); next} {printf(&quot;%-15s: %s\\n&quot;,fileName,$0)}&#39;</span>
    <span class="token punctuation">;</span><span class="token punctuation">;</span>
    namenode<span class="token punctuation">)</span>
        start_name_node
        <span class="token builtin class-name">cd</span> <span class="token variable">\${HADOOP_HOME}</span>/logs
        <span class="token function">tail</span> <span class="token parameter variable">-f</span> *namenode*.log *secondarynamenode*.log <span class="token operator">|</span> <span class="token function">awk</span> <span class="token string">&#39;/^==&gt; / {fileName=substr($0ï¼Œ5ï¼Œlength-8); next} {printf(&quot;%-15s: %s\\n&quot;,fileName,$0)}&#39;</span>
    <span class="token punctuation">;</span><span class="token punctuation">;</span>
    datanode<span class="token punctuation">)</span>
        start_data_node
        <span class="token function">tail</span> <span class="token parameter variable">-f</span> <span class="token variable">\${HADOOP_HOME}</span>/logs/*datanode*.log
    <span class="token punctuation">;</span><span class="token punctuation">;</span>
    resourcemanager<span class="token punctuation">)</span>
        start_resource_manager
        <span class="token function">tail</span> <span class="token parameter variable">-f</span> <span class="token variable">\${HADOOP_HOME}</span>/logs/*resourcemanager*.log
    <span class="token punctuation">;</span><span class="token punctuation">;</span>
    nodemanager<span class="token punctuation">)</span>
        start_node_manager
        <span class="token function">tail</span> <span class="token parameter variable">-f</span> <span class="token variable">\${HADOOP_HOME}</span>/logs/*nodemanager*.log
    <span class="token punctuation">;</span><span class="token punctuation">;</span>
    historyserver<span class="token punctuation">)</span>
        start_history_server
        <span class="token function">tail</span> <span class="token parameter variable">-f</span> <span class="token variable">\${HADOOP_HOME}</span>/logs/*historyserver*.log
    <span class="token punctuation">;</span><span class="token punctuation">;</span>
    hive<span class="token punctuation">)</span>
        start_hive
        <span class="token builtin class-name">cd</span> <span class="token variable">\${HADOOP_HOME}</span>/logs
        <span class="token function">tail</span> <span class="token parameter variable">-f</span> metastore.log hiveserver2.log <span class="token operator">|</span> <span class="token function">awk</span> <span class="token string">&#39;/^==&gt; / {fileName=substr($0ï¼Œ5ï¼Œlength-8); next} {printf(&quot;%-15s: %s\\n&quot;,fileName,$0)}&#39;</span>
    <span class="token punctuation">;</span><span class="token punctuation">;</span>
    *<span class="token punctuation">)</span>
        <span class="token variable">$@</span>
    <span class="token punctuation">;</span><span class="token punctuation">;</span>
<span class="token keyword">esac</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></details><h3 id="æ„å»ºé•œåƒ" tabindex="-1"><a class="header-anchor" href="#æ„å»ºé•œåƒ"><span>æ„å»ºé•œåƒ</span></a></h3><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token comment">#è¿›å…¥ç›®å½•</span>
<span class="token builtin class-name">cd</span> hadoop-compose
<span class="token comment">#æ„å»ºé•œåƒ</span>
<span class="token function">docker</span> build <span class="token parameter variable">-t</span> hadoop100 <span class="token builtin class-name">.</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="è¿è¡Œæˆªå›¾" tabindex="-1"><a class="header-anchor" href="#è¿è¡Œæˆªå›¾"><span>è¿è¡Œæˆªå›¾</span></a></h2><p><img src="https://gitee.com/Zhouwen-CN/blog_pictures/raw/master/images/202403282033698.png" alt="" loading="lazy"><img src="https://gitee.com/Zhouwen-CN/blog_pictures/raw/master/images/202403282034349.png" alt="" loading="lazy"><img src="https://gitee.com/Zhouwen-CN/blog_pictures/raw/master/images/202404022049022.png" alt="" loading="lazy"><img src="https://gitee.com/Zhouwen-CN/blog_pictures/raw/master/images/202403282106542.png" alt="" loading="lazy"></p>`,6);function R(P,S){const o=c("Tabs");return i(),u("div",null,[v,m,r(" more "),b,n("details",g,[h,k(o,{id:"205",data:[{id:"core-site.xml"},{id:"hdfs-site.xml"},{id:"yarn-site.xml"},{id:"mapred-site.xml"},{id:"hive-site.xml"},{id:"spark-env.sh"},{id:"spark-default.conf"}]},{title0:a(({value:t,isActive:e})=>[s("core-site.xml")]),title1:a(({value:t,isActive:e})=>[s("hdfs-site.xml")]),title2:a(({value:t,isActive:e})=>[s("yarn-site.xml")]),title3:a(({value:t,isActive:e})=>[s("mapred-site.xml")]),title4:a(({value:t,isActive:e})=>[s("hive-site.xml")]),title5:a(({value:t,isActive:e})=>[s("spark-env.sh")]),title6:a(({value:t,isActive:e})=>[s("spark-default.conf")]),tab0:a(({value:t,isActive:e})=>[_]),tab1:a(({value:t,isActive:e})=>[O]),tab2:a(({value:t,isActive:e})=>[y]),tab3:a(({value:t,isActive:e})=>[f]),tab4:a(({value:t,isActive:e})=>[H]),tab5:a(({value:t,isActive:e})=>[D]),tab6:a(({value:t,isActive:e})=>[E]),_:1},8,["data"])]),A])}const x=l(d,[["render",R],["__file","hadoop_with_docker.html.vue"]]),$=JSON.parse('{"path":"/bigdata/hadoop_with_docker.html","title":"Docker å¿«é€Ÿå¯åŠ¨ Hadoop","lang":"zh-CN","frontmatter":{"title":"Docker å¿«é€Ÿå¯åŠ¨ Hadoop","icon":"fa-solid fa-republican","date":"2024-03-28T00:00:00.000Z","star":true,"category":["å¤§æ•°æ®"],"tag":["hadoop"],"description":"ğŸ‰ æ–‡ç« çš„ä¸»è¦ç›®çš„å°±æ˜¯ä¸ºäº†å¿«é€Ÿå¯åŠ¨ä¸€ä¸ª hadoop ç¯å¢ƒï¼Œç”¨äºå­¦ä¹ æˆ–è€…æµ‹è¯•","head":[["meta",{"property":"og:url","content":"https://zhouwen-cn.gitee.io/orange-blog/bigdata/hadoop_with_docker.html"}],["meta",{"property":"og:site_name","content":"æ©™å­åšå®¢"}],["meta",{"property":"og:title","content":"Docker å¿«é€Ÿå¯åŠ¨ Hadoop"}],["meta",{"property":"og:description","content":"ğŸ‰ æ–‡ç« çš„ä¸»è¦ç›®çš„å°±æ˜¯ä¸ºäº†å¿«é€Ÿå¯åŠ¨ä¸€ä¸ª hadoop ç¯å¢ƒï¼Œç”¨äºå­¦ä¹ æˆ–è€…æµ‹è¯•"}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:image","content":"https://gitee.com/Zhouwen-CN/blog_pictures/raw/master/images/202403282033698.png"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2024-03-29T03:18:49.000Z"}],["meta",{"property":"article:author","content":"Mr.é™ˆ"}],["meta",{"property":"article:tag","content":"hadoop"}],["meta",{"property":"article:published_time","content":"2024-03-28T00:00:00.000Z"}],["meta",{"property":"article:modified_time","content":"2024-03-29T03:18:49.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"Docker å¿«é€Ÿå¯åŠ¨ Hadoop\\",\\"image\\":[\\"https://gitee.com/Zhouwen-CN/blog_pictures/raw/master/images/202403282033698.png\\",\\"https://gitee.com/Zhouwen-CN/blog_pictures/raw/master/images/202403282034349.png\\",\\"https://gitee.com/Zhouwen-CN/blog_pictures/raw/master/images/202404022049022.png\\",\\"https://gitee.com/Zhouwen-CN/blog_pictures/raw/master/images/202403282106542.png\\"],\\"datePublished\\":\\"2024-03-28T00:00:00.000Z\\",\\"dateModified\\":\\"2024-03-29T03:18:49.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"Mr.é™ˆ\\",\\"url\\":\\"https://gitee.com/Zhouwen-CN\\",\\"email\\":\\"597879949@qq.com\\"}]}"]]},"headers":[{"level":3,"title":"ç‰ˆæœ¬ä¿¡æ¯","slug":"ç‰ˆæœ¬ä¿¡æ¯","link":"#ç‰ˆæœ¬ä¿¡æ¯","children":[]},{"level":3,"title":"é»˜è®¤ç«¯å£","slug":"é»˜è®¤ç«¯å£","link":"#é»˜è®¤ç«¯å£","children":[]},{"level":2,"title":"ç›´æ¥ä½¿ç”¨æ‰“åŒ…å¥½çš„é•œåƒ","slug":"ç›´æ¥ä½¿ç”¨æ‰“åŒ…å¥½çš„é•œåƒ","link":"#ç›´æ¥ä½¿ç”¨æ‰“åŒ…å¥½çš„é•œåƒ","children":[{"level":3,"title":"docker run","slug":"docker-run","link":"#docker-run","children":[]},{"level":3,"title":"docker compose","slug":"docker-compose","link":"#docker-compose","children":[]}]},{"level":2,"title":"å°è¯•æ„å»ºè‡ªå·±çš„é•œåƒ","slug":"å°è¯•æ„å»ºè‡ªå·±çš„é•œåƒ","link":"#å°è¯•æ„å»ºè‡ªå·±çš„é•œåƒ","children":[{"level":3,"title":"å®‰è£… docker","slug":"å®‰è£…-docker","link":"#å®‰è£…-docker","children":[]},{"level":3,"title":"ç›®å½•ç»“æ„","slug":"ç›®å½•ç»“æ„","link":"#ç›®å½•ç»“æ„","children":[]},{"level":3,"title":"ç¼–å†™ dockerfile","slug":"ç¼–å†™-dockerfile","link":"#ç¼–å†™-dockerfile","children":[]},{"level":3,"title":"é…ç½®æ–‡ä»¶","slug":"é…ç½®æ–‡ä»¶","link":"#é…ç½®æ–‡ä»¶","children":[]},{"level":3,"title":"æ ¸å¿ƒå¯åŠ¨æ–‡ä»¶","slug":"æ ¸å¿ƒå¯åŠ¨æ–‡ä»¶","link":"#æ ¸å¿ƒå¯åŠ¨æ–‡ä»¶","children":[]},{"level":3,"title":"æ„å»ºé•œåƒ","slug":"æ„å»ºé•œåƒ","link":"#æ„å»ºé•œåƒ","children":[]}]},{"level":2,"title":"è¿è¡Œæˆªå›¾","slug":"è¿è¡Œæˆªå›¾","link":"#è¿è¡Œæˆªå›¾","children":[]}],"git":{"createdTime":1711682329000,"updatedTime":1711682329000,"contributors":[{"name":"Zhouwen-CN","email":"597879949@qq.com","commits":1}]},"readingTime":{"minutes":6.24,"words":1871},"filePathRelative":"bigdata/hadoop_with_docker.md","localizedDate":"2024å¹´3æœˆ28æ—¥","excerpt":"\\n<p>ğŸ‰ æ–‡ç« çš„ä¸»è¦ç›®çš„å°±æ˜¯ä¸ºäº†å¿«é€Ÿå¯åŠ¨ä¸€ä¸ª <code>hadoop</code> ç¯å¢ƒï¼Œç”¨äºå­¦ä¹ æˆ–è€…æµ‹è¯•</p>\\n","autoDesc":true}');export{x as comp,$ as data};
